{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { isLeaf, restoreCompatibleValue } from '../util';\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\nvar defaultRender = function defaultRender(inputValue, path, prefixCls, fieldNames) {\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\nexport default function useSearchResult(resultConfig) {\n  var searchConfig = resultConfig.searchConfig,\n    flattenOptions = resultConfig.flattenOptions,\n    fieldNames = resultConfig.fieldNames,\n    changeOnSelect = resultConfig.changeOnSelect,\n    searchValue = resultConfig.searchValue,\n    prefixCls = resultConfig.prefixCls; // ============================== MISC ==============================\n\n  var filterOption = searchConfig.filter || defaultFilter;\n  var renderOption = searchConfig.render || defaultRender; // ============================= Filter =============================\n  // Do filter\n\n  var filteredEntityList = React.useMemo(function () {\n    if (!searchValue) {\n      return [];\n    } // Normalize list\n\n    var normalizeList = flattenOptions.map(function (option) {\n      var _restoreCompatibleVal = restoreCompatibleValue(option, fieldNames),\n        options = _restoreCompatibleVal.options;\n      var originOptionList = options.map(function (opt) {\n        return opt.node;\n      });\n      return {\n        option: option,\n        originOptionList: originOptionList\n      };\n    }); // Not keep parent node when !changeOnSelect\n\n    if (!changeOnSelect) {\n      normalizeList = normalizeList.filter(function (_ref2) {\n        var option = _ref2.option;\n        return isLeaf(option.data);\n      });\n    } // Filter\n\n    var filteredList = [];\n    for (var i = 0; i < normalizeList.length; i += 1) {\n      // Perf saving if enabled\n      if (!searchConfig.sort && filteredList.length >= searchConfig.limit) {\n        break;\n      } // Do filter\n\n      var optGrp = normalizeList[i];\n      if (filterOption(searchValue, optGrp.originOptionList, fieldNames)) {\n        filteredList.push(optGrp);\n      }\n    } // Sort: When searchConfig.sort is enabled. We have to filter all the list\n\n    if (searchConfig.sort) {\n      filteredList.sort(function (a, b) {\n        return searchConfig.sort(a.originOptionList, b.originOptionList, searchValue, fieldNames);\n      });\n    }\n    return filteredList;\n  }, [flattenOptions, fieldNames, searchValue, filterOption, changeOnSelect, searchConfig]); // ======================== Generate Options ========================\n  // Wrap with connected label\n\n  var options = React.useMemo(function () {\n    return filteredEntityList.map(function (_ref3) {\n      var option = _ref3.option,\n        originOptionList = _ref3.originOptionList;\n      var title = renderOption(searchValue, originOptionList, prefixCls, fieldNames);\n      return _objectSpread(_objectSpread({}, option.data), {}, {\n        title: title\n      });\n    });\n  }, [searchValue, renderOption, filteredEntityList, fieldNames, prefixCls]);\n  return options;\n}","map":{"version":3,"names":["_objectSpread","React","isLeaf","restoreCompatibleValue","defaultFilter","search","options","_ref","label","some","opt","String","toLowerCase","includes","defaultRender","inputValue","path","prefixCls","fieldNames","map","join","useSearchResult","resultConfig","searchConfig","flattenOptions","changeOnSelect","searchValue","filterOption","filter","renderOption","render","filteredEntityList","useMemo","normalizeList","option","_restoreCompatibleVal","originOptionList","node","_ref2","data","filteredList","i","length","sort","limit","optGrp","push","a","b","_ref3","title"],"sources":["F:/Great Learning FSD/React Js/graded-final/repo/node_modules/rc-cascader/es/hooks/useSearchResult.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { isLeaf, restoreCompatibleValue } from '../util';\n\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\n\nvar defaultRender = function defaultRender(inputValue, path, prefixCls, fieldNames) {\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\n\nexport default function useSearchResult(resultConfig) {\n  var searchConfig = resultConfig.searchConfig,\n      flattenOptions = resultConfig.flattenOptions,\n      fieldNames = resultConfig.fieldNames,\n      changeOnSelect = resultConfig.changeOnSelect,\n      searchValue = resultConfig.searchValue,\n      prefixCls = resultConfig.prefixCls; // ============================== MISC ==============================\n\n  var filterOption = searchConfig.filter || defaultFilter;\n  var renderOption = searchConfig.render || defaultRender; // ============================= Filter =============================\n  // Do filter\n\n  var filteredEntityList = React.useMemo(function () {\n    if (!searchValue) {\n      return [];\n    } // Normalize list\n\n\n    var normalizeList = flattenOptions.map(function (option) {\n      var _restoreCompatibleVal = restoreCompatibleValue(option, fieldNames),\n          options = _restoreCompatibleVal.options;\n\n      var originOptionList = options.map(function (opt) {\n        return opt.node;\n      });\n      return {\n        option: option,\n        originOptionList: originOptionList\n      };\n    }); // Not keep parent node when !changeOnSelect\n\n    if (!changeOnSelect) {\n      normalizeList = normalizeList.filter(function (_ref2) {\n        var option = _ref2.option;\n        return isLeaf(option.data);\n      });\n    } // Filter\n\n\n    var filteredList = [];\n\n    for (var i = 0; i < normalizeList.length; i += 1) {\n      // Perf saving if enabled\n      if (!searchConfig.sort && filteredList.length >= searchConfig.limit) {\n        break;\n      } // Do filter\n\n\n      var optGrp = normalizeList[i];\n\n      if (filterOption(searchValue, optGrp.originOptionList, fieldNames)) {\n        filteredList.push(optGrp);\n      }\n    } // Sort: When searchConfig.sort is enabled. We have to filter all the list\n\n\n    if (searchConfig.sort) {\n      filteredList.sort(function (a, b) {\n        return searchConfig.sort(a.originOptionList, b.originOptionList, searchValue, fieldNames);\n      });\n    }\n\n    return filteredList;\n  }, [flattenOptions, fieldNames, searchValue, filterOption, changeOnSelect, searchConfig]); // ======================== Generate Options ========================\n  // Wrap with connected label\n\n  var options = React.useMemo(function () {\n    return filteredEntityList.map(function (_ref3) {\n      var option = _ref3.option,\n          originOptionList = _ref3.originOptionList;\n      var title = renderOption(searchValue, originOptionList, prefixCls, fieldNames);\n      return _objectSpread(_objectSpread({}, option.data), {}, {\n        title: title\n      });\n    });\n  }, [searchValue, renderOption, filteredEntityList, fieldNames, prefixCls]);\n  return options;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}